/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1          // see stubs_entry.S

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFFC4F0F8 - 0xFFC4F390, length=167
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R3-R7,LR} \n"
"    LDR     R6, =0x54C0 \n"

"loc_FFC4F100:\n"
"    LDR     R0, [R6, #8] \n"
"    MOV     R2, #0 \n"
"    MOV     R1, SP \n"
"    BL      sub_FFC17B08 /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFC4F12C \n"
"    LDR     R1, =0x48E \n"
"    LDR     R0, =0xFFC4EDF8 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    LDMFD   SP!, {R3-R7,PC} \n"

"loc_FFC4F12C:\n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x1A \n"
"    ADDLS   PC, PC, R1, LSL#2 \n"
"    B       loc_FFC4F354 \n"
"    B       loc_FFC4F1AC \n"
"    B       loc_FFC4F1B4 \n"
"    B       loc_FFC4F23C \n"
"    B       loc_FFC4F250 \n"
"    B       loc_FFC4F248 \n"
"    B       loc_FFC4F258 \n"
"    B       loc_FFC4F260 \n"
"    B       loc_FFC4F26C \n"
"    B       loc_FFC4F2C4 \n"
"    B       loc_FFC4F250 \n"
"    B       loc_FFC4F2CC \n"
"    B       loc_FFC4F2D4 \n"
"    B       loc_FFC4F2DC \n"
"    B       loc_FFC4F2E4 \n"
"    B       loc_FFC4F2EC \n"
"    B       loc_FFC4F2F4 \n"
"    B       loc_FFC4F2FC \n"
"    B       loc_FFC4F304 \n"
"    B       loc_FFC4F30C \n"
"    B       loc_FFC4F318 \n"
"    B       loc_FFC4F324 \n"
"    B       loc_FFC4F32C \n"
"    B       loc_FFC4F334 \n"
"    B       loc_FFC4F33C \n"
"    B       loc_FFC4F344 \n"
"    B       loc_FFC4F34C \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F1AC:\n"
"    BL      sub_FFD1717C \n"
"    BL      shooting_expo_param_override\n"      // added
"    B       loc_FFC4F264 \n"

"loc_FFC4F1B4:\n"
"    LDR     R4, [R0, #0xC] \n"
"    LDR     R0, [R4, #8] \n"
"    ORR     R0, R0, #1 \n"
"    STR     R0, [R4, #8] \n"
"    MOV     R0, #2 \n"
"    BL      sub_FFC4A04C \n"
"    BL      sub_FFD1716C \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD17554 \n"
"    TST     R0, #1 \n"
"    MOVNE   R2, R4 \n"
"    MOVNE   R1, #1 \n"
"    BNE     loc_FFC4F2BC \n"
"    BL      sub_FFD35818 \n"
"    BL      sub_FFC5DC44 \n"
"    STR     R0, [R4, #0x14] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD1854C \n"
"    BL      sub_FFD18FB0 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD18614_my \n"  // --> Patched. Old value = 0xFFD18614.
"    BL      capt_seq_hook_raw_here \n"         // added
"    MOV     R5, R0 \n"
"    BL      sub_FFD19F90 \n"
"    BL      sub_FFD19FCC \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FFC4D860 \n"
"    BL      sub_FFD189C4 \n"
"    CMP     R0, #0 \n"
"    LDRNE   R0, [R4, #8] \n"
"    ORRNE   R0, R0, #0x2000 \n"
"    STRNE   R0, [R4, #8] \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F23C:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FFD17310 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F248:\n"
"    BL      sub_FFD16DD0 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F250:\n"
"    BL      sub_FFD1715C \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F258:\n"
"    BL      sub_FFD17164 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F260:\n"
"    BL      sub_FFD17230 \n"

"loc_FFC4F264:\n"
"    BL      sub_FFC4D4E0 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F26C:\n"
"    LDR     R4, [R0, #0xC] \n"
"    BL      sub_FFD1716C \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD178D4 \n"
"    TST     R0, #1 \n"
"    MOV     R5, R0 \n"
"    BNE     loc_FFC4F2AC \n"
"    BL      sub_FFC5DC44 \n"
"    STR     R0, [R4, #0x14] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD1854C \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD18A24 \n"
"    MOV     R5, R0 \n"
"    LDR     R0, [R4, #0x14] \n"
"    BL      sub_FFC5DE50 \n"

"loc_FFC4F2AC:\n"
"    BL      sub_FFD1715C \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #9 \n"
"    MOV     R0, R5 \n"

"loc_FFC4F2BC:\n"
"    BL      sub_FFC4D860 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F2C4:\n"
"    BL      sub_FFD17290 \n"
"    B       loc_FFC4F264 \n"

"loc_FFC4F2CC:\n"
"    BL      sub_FFD17B50 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F2D4:\n"
"    BL      sub_FFD17D38 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F2DC:\n"
"    BL      sub_FFD17DC8 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F2E4:\n"
"    BL      sub_FFD17E7C \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F2EC:\n"
"    MOV     R0, #0 \n"
"    B       loc_FFC4F310 \n"

"loc_FFC4F2F4:\n"
"    BL      sub_FFD18170 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F2FC:\n"
"    BL      sub_FFD18204 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F304:\n"
"    BL      sub_FFD182CC \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F30C:\n"
"    MOV     R0, #1 \n"

"loc_FFC4F310:\n"
"    BL      sub_FFD18020 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F318:\n"
"    BL      sub_FFD1742C \n"
"    BL      sub_FFC14A34 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F324:\n"
"    BL      sub_FFD17F38 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F32C:\n"
"    BL      sub_FFD17F7C \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F334:\n"
"    BL      sub_FFD19F74 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F33C:\n"
"    BL      sub_FFD19F90 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F344:\n"
"    BL      sub_FFD19FA0 \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F34C:\n"
"    BL      sub_FFD19FCC \n"
"    B       loc_FFC4F360 \n"

"loc_FFC4F354:\n"
"    LDR     R1, =0x58E \n"
"    LDR     R0, =0xFFC4EDF8 \n"
"    BL      _DebugAssert \n"

"loc_FFC4F360:\n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0, #4] \n"
"    LDR     R0, [R6, #4] \n"
"    BL      sub_FFC17884 /*_SetEventFlag*/ \n"
"    LDR     R4, [SP] \n"
"    LDR     R0, [R4, #8] \n"
"    CMP     R0, #0 \n"
"    LDREQ   R1, =0x10D \n"
"    LDREQ   R0, =0xFFC4EDF8 \n"
"    BLEQ    _DebugAssert \n"
"    MOV     R0, #0 \n"
"    STR     R0, [R4, #8] \n"
"    B       loc_FFC4F100 \n"
);
}

/*************************************************************/
//** sub_FFD18614_my @ 0xFFD18614 - 0xFFD18684, length=29
void __attribute__((naked,noinline)) sub_FFD18614_my() {
asm volatile (
"    STMFD   SP!, {R0-R10,LR} \n"
"    MOV     R6, #0 \n"
"    MOV     R4, R0 \n"
"    BL      sub_FFD19114 \n"
"    MVN     R1, #0 \n"
"    BL      sub_FFC178B8 /*_ClearEventFlag*/ \n"
"    MOV     R2, #4 \n"
"    ADD     R1, SP, #8 \n"
"    MOV     R0, #0x8A \n"
"    BL      _GetPropertyCase \n"
"    TST     R0, #1 \n"
"    MOVNE   R1, #0x218 \n"
"    LDRNE   R0, =0xFFD18828 \n"
"    BLNE    _DebugAssert \n"
"    LDR     R8, =0x18980 \n"
"    LDR     R5, =0x188D4 \n"
"    LDRSH   R1, [R8, #0xE] \n"
"    LDR     R0, [R5, #0x74] \n"
"    BL      sub_FFDBB3C4 \n"
"    BL      _GetCCDTemperature \n"
"    LDR     R2, =0x85C4 \n"
"    ADD     R3, R4, #0x8C \n"
"    STRH    R0, [R4, #0x88] \n"
"    STRD    R2, [SP] \n"
"    MOV     R1, R0 \n"
"    LDRH    R0, [R5, #0x4C] \n"
"    LDRSH   R2, [R8, #0xC] \n"
"    LDR     R3, =0x85C0 \n"
"    BL      sub_FFD19600 \n"
"    BL      wait_until_remote_button_is_released\n" // added
"    BL      capt_seq_hook_set_nr\n"                 // added
"    LDR     PC, =0xFFD18688 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFFC973E4 - 0xFFC979D4, length=381
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x20 \n"
"    LDR     R8, =0xBB8 \n"
"    LDR     R7, =0x66F8 \n"
"    LDR     R5, =0x3C63C \n"
"    MOV     R0, #0 \n"
"    ADD     R6, SP, #0x10 \n"
"    STR     R0, [SP, #0xC] \n"

"loc_FFC97404:\n"
"    LDR     R0, [R7, #0x20] \n"
"    MOV     R2, #0 \n"
"    ADD     R1, SP, #0x1C \n"
"    BL      sub_FFC17B08 /*_ReceiveMessageQueue*/ \n"
"    LDR     R0, [SP, #0xC] \n"
"    CMP     R0, #1 \n"
"    BNE     loc_FFC9744C \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R0, [R0] \n"
"    CMP     R0, #0x13 \n"
"    CMPNE   R0, #0x14 \n"
"    CMPNE   R0, #0x15 \n"
"    BEQ     loc_FFC97568 \n"
"    CMP     R0, #0x27 \n"
"    BEQ     loc_FFC97540 \n"
"    ADD     R1, SP, #0xC \n"
"    MOV     R0, #0 \n"
"    BL      sub_FFC97394 \n"

"loc_FFC9744C:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x2C \n"
"    BNE     loc_FFC9747C \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC98648 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFC17884 /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x20 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"

"loc_FFC9747C:\n"
"    CMP     R1, #0x2B \n"
"    BNE     loc_FFC97498 \n"
"    LDR     R2, [R0, #0x88]! \n"
"    LDR     R1, [R0, #4] \n"
"    MOV     R0, R1 \n"
"    BLX     R2 \n"
"    B       loc_FFC979CC \n"

"loc_FFC97498:\n"
"    CMP     R1, #0x25 \n"
"    BNE     loc_FFC974E8 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFC178B8 /*_ClearEventFlag*/ \n"
"    LDR     R0, =0xFFC93E54 \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFD0C000 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R2, R8 \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFC177BC /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    LDRNE   R1, =0xD1B \n"
"    BNE     loc_FFC9752C \n"

"loc_FFC974D4:\n"
"    LDR     R1, [SP, #0x1C] \n"
"    LDR     R0, [R1, #0x8C] \n"
"    LDR     R1, [R1, #0x88] \n"
"    BLX     R1 \n"
"    B       loc_FFC979CC \n"

"loc_FFC974E8:\n"
"    CMP     R1, #0x26 \n"
"    BNE     loc_FFC97538 \n"
"    ADD     R1, SP, #0xC \n"
"    BL      sub_FFC97394 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFC178B8 /*_ClearEventFlag*/ \n"
"    LDR     R0, =0xFFC93E64 \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFD0C96C \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R2, R8 \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFC177BC /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFC974D4 \n"
"    LDR     R1, =0xD25 \n"

"loc_FFC9752C:\n"
"    LDR     R0, =0xFFC94554 \n"
"    BL      _DebugAssert \n"
"    B       loc_FFC974D4 \n"

"loc_FFC97538:\n"
"    CMP     R1, #0x27 \n"
"    BNE     loc_FFC97550 \n"

"loc_FFC97540:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    ADD     R1, SP, #0xC \n"
"    BL      sub_FFC97394 \n"
"    B       loc_FFC974D4 \n"

"loc_FFC97550:\n"
"    CMP     R1, #0x2A \n"
"    BNE     loc_FFC97568 \n"
"    BL      sub_FFC76800 \n"
"    BL      sub_FFC775CC \n"
"    BL      sub_FFC77050 \n"
"    B       loc_FFC974D4 \n"

"loc_FFC97568:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R4, #1 \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x11 \n"
"    CMPNE   R1, #0x12 \n"
"    BNE     loc_FFC975D8 \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R0, R1, LSL#2 \n"
"    SUB     R1, R1, #8 \n"
"    LDMIA   R1, {R2-R4} \n"
"    STMIA   R6, {R2-R4} \n"
"    BL      sub_FFC95F08 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC98A20 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x90] \n"
"    LDR     R2, [R0, #0x94] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    B       loc_FFC9790C \n"

"loc_FFC975D8:\n"
"    CMP     R1, #0x13 \n"
"    CMPNE   R1, #0x14 \n"
"    CMPNE   R1, #0x15 \n"
"    BNE     loc_FFC9768C \n"
"    ADD     R3, SP, #0xC \n"
"    MOV     R2, SP \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFC96150 \n"
"    CMP     R0, #1 \n"
"    MOV     R4, R0 \n"
"    CMPNE   R4, #5 \n"
"    BNE     loc_FFC97628 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, R4 \n"
"    LDR     R1, [R0, #0x7C]! \n"
"    LDR     R12, [R0, #0xC]! \n"
"    LDR     R3, [R0, #4] \n"
"    MOV     R0, SP \n"
"    BLX     R12 \n"
"    B       loc_FFC97660 \n"

"loc_FFC97628:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    CMP     R4, #2 \n"
"    LDR     R3, [R0, #0x8C] \n"
"    CMPNE   R4, #6 \n"
"    BNE     loc_FFC97674 \n"
"    LDR     R12, [R0, #0x88] \n"
"    MOV     R0, SP \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    BLX     R12 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, SP \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFC970E0 \n"

"loc_FFC97660:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R2, [SP, #0xC] \n"
"    MOV     R1, R4 \n"
"    BL      sub_FFC97334 \n"
"    B       loc_FFC9790C \n"

"loc_FFC97674:\n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R12, [R0, #0x88] \n"
"    ADD     R0, R0, #4 \n"
"    MOV     R2, R4 \n"
"    BLX     R12 \n"
"    B       loc_FFC9790C \n"

"loc_FFC9768C:\n"
"    CMP     R1, #0x21 \n"
"    CMPNE   R1, #0x22 \n"
"    BNE     loc_FFC976D8 \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R0, R1, LSL#2 \n"
"    SUB     R1, R1, #8 \n"
"    LDMIA   R1, {R2-R4} \n"
"    STMIA   R6, {R2-R4} \n"
"    BL      sub_FFC95488 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC95784 \n"
"    B       loc_FFC9790C \n"

"loc_FFC976D8:\n"
"    ADD     R1, R0, #4 \n"
"    LDMIA   R1, {R2,R3,R12} \n"
"    STMIA   R6, {R2,R3,R12} \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x24 \n"
"    ADDLS   PC, PC, R1, LSL#2 \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC97788 \n"
"    B       loc_FFC97788 \n"
"    B       loc_FFC97790 \n"
"    B       loc_FFC97798 \n"
"    B       loc_FFC97798 \n"
"    B       loc_FFC97798 \n"
"    B       loc_FFC97788 \n"
"    B       loc_FFC97790 \n"
"    B       loc_FFC97798 \n"
"    B       loc_FFC97798 \n"
"    B       loc_FFC977F4 \n"
"    B       loc_FFC977F4 \n"
"    B       loc_FFC978E0 \n"
"    B       loc_FFC978E8 \n"
"    B       loc_FFC978E8 \n"
"    B       loc_FFC978E8 \n"
"    B       loc_FFC978E8 \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC977A0 \n"
"    B       loc_FFC977A8 \n"
"    B       loc_FFC977A8 \n"
"    B       loc_FFC97800 \n"
"    B       loc_FFC97800 \n"
"    B       loc_FFC97808 \n"
"    B       loc_FFC97838 \n"
"    B       loc_FFC97868 \n"
"    B       loc_FFC97898 \n"
"    B       loc_FFC978C8 \n"
"    B       loc_FFC978C8 \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC978EC \n"
"    B       loc_FFC978D0 \n"
"    B       loc_FFC978D8 \n"

"loc_FFC97788:\n"
"    BL      sub_FFC9433C \n"
"    B       loc_FFC978EC \n"

"loc_FFC97790:\n"
"    BL      sub_FFC945CC \n"
"    B       loc_FFC978EC \n"

"loc_FFC97798:\n"
"    BL      sub_FFC947D0 \n"
"    B       loc_FFC978EC \n"

"loc_FFC977A0:\n"
"    BL      sub_FFC94A38 \n"
"    B       loc_FFC978EC \n"

"loc_FFC977A8:\n"
"    BL      sub_FFC94C2C \n"
"    B       loc_FFC978EC \n"

"loc_FFC977F4:\n"
"    BL      sub_FFC94E94_my \n"  // --> Patched. Old value = 0xFFC94E94.
"    MOV     R4, #0 \n"
"    B       loc_FFC978EC \n"

"loc_FFC97800:\n"
"    BL      sub_FFC94FD0 \n"
"    B       loc_FFC978EC \n"

"loc_FFC97808:\n"
"    LDRH    R1, [R0, #4] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R0, #0xC] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC986BC \n"
"    B       loc_FFC978EC \n"

"loc_FFC97838:\n"
"    LDRH    R1, [R0, #4] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R5, #8] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC9883C \n"
"    B       loc_FFC978EC \n"

"loc_FFC97868:\n"
"    LDRH    R1, [R5] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R0, #6] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R5, #8] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC988E8 \n"
"    B       loc_FFC978EC \n"

"loc_FFC97898:\n"
"    LDRH    R1, [R5] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R0, #0xC] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC98988 \n"
"    B       loc_FFC978EC \n"

"loc_FFC978C8:\n"
"    BL      sub_FFC95244 \n"
"    B       loc_FFC978EC \n"

"loc_FFC978D0:\n"
"    BL      sub_FFC95888 \n"
"    B       loc_FFC978EC \n"

"loc_FFC978D8:\n"
"    BL      sub_FFC95AC0 \n"
"    B       loc_FFC978EC \n"

"loc_FFC978E0:\n"
"    BL      sub_FFC95C38 \n"
"    B       loc_FFC978EC \n"

"loc_FFC978E8:\n"
"    BL      sub_FFC95DD0 \n"

"loc_FFC978EC:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    CMP     R4, #1 \n"
"    BNE     loc_FFC97954 \n"

"loc_FFC9790C:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, #0xC \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R0, R0, R1, LSL#2 \n"
"    SUB     R4, R0, #8 \n"
"    LDR     R0, =0x3C63C \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFE668C4 \n"
"    LDR     R0, =0x3C648 \n"
"    MOV     R2, #0xC \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFE668C4 \n"
"    LDR     R0, =0x3C654 \n"
"    MOV     R2, #0xC \n"
"    MOV     R1, R4 \n"
"    BL      sub_FFE668C4 \n"
"    B       loc_FFC979CC \n"

"loc_FFC97954:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R0, [R0] \n"
"    CMP     R0, #0xB \n"
"    BNE     loc_FFC9799C \n"
"    MOV     R3, #0 \n"
"    STR     R3, [SP] \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #0 \n"
"    BL      sub_FFC94144 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [SP] \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #0 \n"
"    B       loc_FFC979C8 \n"

"loc_FFC9799C:\n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #1 \n"
"    STR     R3, [SP] \n"
"    BL      sub_FFC94144 \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #1 \n"
"    STR     R3, [SP] \n"

"loc_FFC979C8:\n"
"    BL      sub_FFC94284 \n"

"loc_FFC979CC:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC98648 \n"
"    B       loc_FFC97404 \n"
);
}

/*************************************************************/
//** sub_FFC94E94_my @ 0xFFC94E94 - 0xFFC94F50, length=48
void __attribute__((naked,noinline)) sub_FFC94E94_my() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    LDR     R7, =0x66F8 \n"
"    MOV     R4, R0 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x3E \n"
"    BL      sub_FFC178B8 /*_ClearEventFlag*/ \n"
"    LDRSH   R0, [R4, #4] \n"
"    MOV     R2, #0 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFC93ED8 \n"
"    MOV     R6, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFC93FE4 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FFC9403C \n"
"    LDRSH   R0, [R4, #0xA] \n"
"    BL      sub_FFC94094 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    BL      sub_FFC940EC \n"
"    MOV     R5, R0 \n"
"    LDR     R0, [R4] \n"
"    LDR     R8, =0x3C654 \n"
"    CMP     R0, #0xB \n"
"    MOVEQ   R6, #0 \n"
"    MOVEQ   R5, #0 \n"
"    BEQ     loc_FFC94F24 \n"
"    CMP     R6, #1 \n"
"    BNE     loc_FFC94F24 \n"
"    LDRSH   R0, [R4, #4] \n"
"    LDR     R1, =0xFFC93E44 \n"
"    MOV     R2, #2 \n"
"    BL      sub_FFD0C328 \n"
"    STRH    R0, [R4, #4] \n"
"    MOV     R0, #0 \n"
"    STR     R0, [R7, #0x28] \n"
"    B       loc_FFC94F2C \n"

"loc_FFC94F24:\n"
"    LDRH    R0, [R8] \n"
"    STRH    R0, [R4, #4] \n"

"loc_FFC94F2C:\n"
"    CMP     R5, #1 \n"
"    LDRNEH  R0, [R8, #8] \n"
"    BNE     loc_FFC94F48 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    MOV     R2, #0x20 \n"
"    LDR     R1, =0xFFC93EC8 \n"
"    BL      sub_FFC98678 \n"

"loc_FFC94F48:\n"
"    STRH    R0, [R4, #0xC] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFC7654C_my \n"  // --> Patched. Old value = 0xFFC7654C.
"    LDR     PC, =0xFFC94F54 \n"  // Continue in firmware
);
}

/*************************************************************/
//** sub_FFC7654C_my @ 0xFFC7654C - 0xFFC765B4, length=27
void __attribute__((naked,noinline)) sub_FFC7654C_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R5, =0x619C \n"
"    MOV     R4, R0 \n"
"    LDR     R0, [R5, #4] \n"
"    CMP     R0, #1 \n"
"    LDRNE   R1, =0x16D \n"
"    LDRNE   R0, =0xFFC762E4 \n"
"    BLNE    _DebugAssert \n"
"    CMN     R4, #0xC00 \n"
"    LDREQSH R4, [R5, #2] \n"
"    CMN     R4, #0xC00 \n"
"    LDREQ   R1, =0x173 \n"
"    LDREQ   R0, =0xFFC762E4 \n"
"    STRH    R4, [R5, #2] \n"
"    BLEQ    _DebugAssert \n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    MOV     R4, R0 \n"
//"  BL      _sub_FFCA63E0 \n"  // --> Nullsub call removed.
"    MOV     R0, R4 \n"
"    BL      sub_FFCAA6BC \n"
"    TST     R0, #1 \n"
"    LDMNEFD SP!, {R4-R6,LR} \n"
"    MOVNE   R1, #0x178 \n"
"    LDRNE   R0, =0xFFC762E4 \n"
"    BNE     _DebugAssert \n"
"    LDMFD   SP!, {R4-R6,PC} \n"
);
}
